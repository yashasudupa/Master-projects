<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Otawa: Parametric Execution Graph</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Otawa
   &#160;<span id="projectnumber">0.10</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__peg.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a>  </div>
  <div class="headertitle">
<div class="title">Parametric Execution Graph</div>  </div>
</div><!--header-->
<div class="contents">

<p>Parametric Execution Graph, or parexegraph, is a way to compute execution of code blocks.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1ParExeGraph.html">otawa::ParExeGraph</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Representation of a parametric execution graph (<a class="el" href="group__peg.html">Parametric Execution Graph</a>).  <a href="classotawa_1_1ParExeGraph.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1ParExeEdge.html">otawa::ParExeEdge</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">An edge in a <a class="el" href="classotawa_1_1ParExeGraph.html">ParExeGraph</a>.  <a href="classotawa_1_1ParExeEdge.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1ParExeException.html">otawa::ParExeException</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classotawa_1_1Exception.html" title="Base class of Otawa exceptions. ">Exception</a> thrown if there is an error during the build and the computation of.  <a href="classotawa_1_1ParExeException.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1ParExeInst.html">otawa::ParExeInst</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Instruction as presented in the <a class="el" href="classotawa_1_1ParExeGraph.html">ParExeGraph</a>.  <a href="classotawa_1_1ParExeInst.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1ParExeNode.html">otawa::ParExeNode</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A node of the <a class="el" href="classotawa_1_1ParExeGraph.html">ParExeGraph</a>, that represents the crossing of an instruction inside a microprocessor stage.  <a href="classotawa_1_1ParExeNode.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1ParExeSequence.html">otawa::ParExeSequence</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A sequence of ParExeInstruction for which a <a class="el" href="classotawa_1_1ParExeGraph.html">ParExeGraph</a> will be built.  <a href="classotawa_1_1ParExeSequence.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1ParExeQueue.html">otawa::ParExeQueue</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Representation of a hardware instruction queue to be used to build a <a class="el" href="classotawa_1_1ParExeGraph.html" title="Representation of a parametric execution graph (Parametric Execution Graph). ">ParExeGraph</a>.  <a href="classotawa_1_1ParExeQueue.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1ParExeStage.html">otawa::ParExeStage</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Representation of a pipeline stage to be used to build a <a class="el" href="classotawa_1_1ParExeGraph.html" title="Representation of a parametric execution graph (Parametric Execution Graph). ">ParExeGraph</a>.  <a href="classotawa_1_1ParExeStage.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1ParExePipeline.html">otawa::ParExePipeline</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Representation of a pipeline (list of stages).  <a href="classotawa_1_1ParExePipeline.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1ParExeProc.html">otawa::ParExeProc</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Repr√©sentation of a processor (to be used to build a <a class="el" href="classotawa_1_1ParExeGraph.html" title="Representation of a parametric execution graph (Parametric Execution Graph). ">ParExeGraph</a>).  <a href="classotawa_1_1ParExeProc.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Parametric Execution Graph, or parexegraph, is a way to compute execution of code blocks. </p>
<p>A parexegraph is a graph whose nodes represents the crossing of an instruction in the microprocessor stage and the edges the time constraints of this crossing.</p>
<h1><a class="anchor" id="Principles"></a>
Principles</h1>
<p>This graph is built for a sequence of instructions, whose the execution time is required, and a prefix sequence to take into account the overlapping effect of the pipeline. Depending on the actual microprocessor, the longer is the prefix sequencer, better are the obtained result. The cost of the sequence is obtained after assigning to each node the last starting date and computing the difference between the last stage of the last instruction of the sequence and the last stage of the last instruction of the prefix sequence. The date assignment to each node is performed under the constraint of contention in the use of resources of the microprocessor (stage parallelism, queues, functional units, etc). Below is an example of such a parametric execution graph:</p>
<div class="image">
<img src="parexegraph-sample.png" alt="parexegraph-sample.png"/>
</div>
<p>As a basis, the pipeline microprocessor is taken from the platform processor description (possibly coming from an external XML file or specially built). As the model used to describe microprocessor is relatively simple and does not allow to describe any type of microprocessor, the use of parexegraph may require to customize the way the graph is built.</p>
<h1><a class="anchor" id="Customization"></a>
Customization</h1>
<p>Basically, an execution graph is represented by a <a class="el" href="classotawa_1_1ParExeGraph.html">ParExeGraph</a> class whose provide also the computation of the cost of a sequence. To compute the cost fore each block a program, for example basic block, a dedicated processor like <a class="el" href="classotawa_1_1GraphBBTime.html">GraphBBTime</a> has to be invoked. As the execution graphs needs to be customized, this analyzer takes a generic parameter defining the actual execution graph to use. To perform the computation in the standard way, you have either to implemened <a class="el" href="classotawa_1_1GraphBBTime.html">GraphBBTime</a> with <a class="el" href="classotawa_1_1ParExeGraph.html">ParExeGraph</a> as the parametric argument: </p><div class="fragment"><div class="line">GraphBBTime&lt;ParExeGraph&gt; bbtime;</div><div class="line">bbtime.process();</div></div><!-- fragment --><p>Or to use an analyzer as <a class="el" href="classotawa_1_1BasicGraphBBTime.html">BasicGraphBBTime</a> that already provides such an implementation.</p>
<p>Yet, if your hardware does not fits the standard OTAWA processor model, you may to customize the way the graphs are built.</p>
<p>First, build a model as close as possible in the processor model of OTAWA and use a way to pass it to pass it to the WCET building system. This may be done using the configuration properties (<a class="el" href="namespaceotawa.html#a7c598f7f44779116c7f1f418ae7b350a">PROCESSOR_PATH</a>, <a class="el" href="namespaceotawa.html#a68a4e78b466a328261e894844fc9f3a8">PROCESSOR_ELEMENT</a> or <a class="el" href="namespaceotawa.html#a68d90364d7b7c7fdb86c380e36460a4e">PROCESSOR</a>) or using an OTAWA script (in the platform section).</p>
<p>Then, you provide your own parametric execution graph implementation by overloading the <a class="el" href="classotawa_1_1ParExeGraph.html">ParExeGraph</a> class and pass as parametric argument to <a class="el" href="classotawa_1_1GraphBBTime.html">GraphBBTime</a>. To build the graph, the function <a class="el" href="classotawa_1_1ParExeGraph.html#a586d88232ab789255c4a66c020e70f1d">ParExeGraph::build()</a> is called that, in turn, calls the following methods: </p><ul>
<li>void <a class="el" href="classotawa_1_1ParExeGraph.html#ab215b08b7348c439e8562931672461f6" title="Creates nodes in the graph: one node for each (instruction/pipeline_stage) pair. ">ParExeGraph::createNodes(void)</a> &ndash; creates the nodes of the graph, </li>
<li>void <a class="el" href="classotawa_1_1ParExeGraph.html#a189f8553256c7ad7b02199af774d582e" title="Adds edges that represent the order of stages in the pipeline. ">ParExeGraph::addEdgesForPipelineOrder(void)</a> &ndash; add edges to follow stage pipeline order, </li>
<li>void <a class="el" href="classotawa_1_1ParExeGraph.html#aaa9d07e2e3a8ff3e4a1cb695b74aaebc" title="Add edges for fetch timing, that is edges ensuring that instruction in the same block are fetched in ...">ParExeGraph::addEdgesForFetch(void)</a> &ndash; add edges to support fetching effects (according to the instruction cache as a default), </li>
<li>void <a class="el" href="classotawa_1_1ParExeGraph.html#a43c0b9484d120129d796acfcfa4450eb" title="Adds edges to reflect processing of instruction in the order of the program. ">ParExeGraph::addEdgesForProgramOrder(elm::genstruct::SLList&lt;ParExeStage *&gt; *list_of_stages)</a> &ndash; add edges to represent program order, </li>
<li>void <a class="el" href="classotawa_1_1ParExeGraph.html#aa3f769734da00681be2857147efd6687" title="Adds edges to represent contention to access memory, basically, between FUs of instructions performin...">ParExeGraph::addEdgesForMemoryOrder(void)</a> &ndash; add edges to support memory access order, </li>
<li>void <a class="el" href="classotawa_1_1ParExeGraph.html#ae367bbd7c7bb6ce523efb8ba421cff76" title="Adds edges for data dependencies, that is, if an instruction (a) produces content of a register and i...">ParExeGraph::addEdgesForDataDependencies(void)</a> &ndash; add edges for data dependencies, </li>
<li>void <a class="el" href="classotawa_1_1ParExeGraph.html#a56dcd0440525b45e17992d0ffab4519d" title="Called to add edges representing contention on the different queues of the microprocessor. ">ParExeGraph::addEdgesForQueues(void)</a> &ndash; add edges to represent access to queues.</li>
</ul>
<p>All these methods are virtual and can be overridden to implements the specific behaviour of your hardware.</p>
<h1><a class="anchor" id="Structure"></a>
Structure</h1>
<p>A parametric execution graph, <a class="el" href="classotawa_1_1ParExeGraph.html">ParExeGraph</a>, is made of nodes, <a class="el" href="classotawa_1_1ParExeNode.html">ParExeNode</a>, and of edges, <a class="el" href="classotawa_1_1ParExeEdge.html">ParExeEdge</a> linking two nodes. An edge may be solid, <a class="el" href="classotawa_1_1ParExeEdge.html#a6cccb63a1ed18047da6b71c177864e73a914ccf16bfc2a61602dafdc77c222de5">ParExeEdge::SLASHED</a>, representing a possible startup at the same time, or <a class="el" href="classotawa_1_1ParExeEdge.html#a6cccb63a1ed18047da6b71c177864e73a47f12473964535d285c6c6e9d4676ca8">ParExeEdge::SOLID</a>, representing a sequence in the startup (at least one cycle). The time passed in a node or on a edge may be customized. A node is the join of an instruction, <a class="el" href="classotawa_1_1ParExeInst.html">ParExeInst</a>, executed on a particular pipeline stage, </p><dl class="section user"><dt>ParExeStage.</dt><dd></dd></dl>
<p>Basically,the parametric execution graph is generated from a processor description, <a class="el" href="classotawa_1_1ParExeProc.html">ParExeProc</a>, whose most interesting paer is the <a class="el" href="classotawa_1_1ParExePipeline.html">ParExePipeline</a> that contains two collections: </p><ul>
<li>a collection of queues, <a class="el" href="classotawa_1_1ParExeQueue.html">ParExeQueue</a>, representing the queues inside the processor, </li>
<li>a list of stages, <a class="el" href="namespaceParExeStage.html">ParExeStage</a>, representing the stages in order in the pipeline.</li>
</ul>
<p>In turn, if the <a class="el" href="namespaceParExeStage.html">ParExeStage</a> is an execution stage, it is composed of <a class="el" href="classotawa_1_1ParExePipeline.html">ParExePipeline</a> that contains functional units represented by <a class="el" href="namespaceParExeStage.html">ParExeStage</a>.</p>
<p>To build the graph, a user has to pass <a class="el" href="classotawa_1_1ParExeSequence.html">ParExeSequence</a>, made of <a class="el" href="classotawa_1_1ParExeInst.html">ParExeInst</a>, that represents, in order, the concatenation of prefix and processed sequences. The <a class="el" href="classotawa_1_1ParExeInst.html">ParExeInst</a> are marked according to their ownership to the prefix or the processed sequence (type ParExeInst::code_part_t). </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
