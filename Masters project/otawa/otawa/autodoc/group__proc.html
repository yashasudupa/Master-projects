<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Otawa: Processor Layer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Otawa
   &#160;<span id="projectnumber">0.10</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__proc.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a>  </div>
  <div class="headertitle">
<div class="title">Processor Layer</div>  </div>
</div><!--header-->
<div class="contents">

<p>The OTAWA <a class="el" href="group__prop.html">Properties System</a> provides a flexible and easy way to store in the program representation the result of different analyses.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1BBProcessor.html">otawa::BBProcessor</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This processor is dedicated to the basic block process thru proccessBB() method.  <a href="classotawa_1_1BBProcessor.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1CFGProcessor.html">otawa::CFGProcessor</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a specialization of the processor class dedicated to <a class="el" href="classotawa_1_1CFG.html" title="Control Flow Graph representation. ">CFG</a> processing.  <a href="classotawa_1_1CFGProcessor.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1ContextualProcessor.html">otawa::ContextualProcessor</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A contextual processor allows to process basic block in a call-aware way even with a virtual <a class="el" href="classotawa_1_1CFG.html" title="Control Flow Graph representation. ">CFG</a> (where called <a class="el" href="classotawa_1_1CFG.html" title="Control Flow Graph representation. ">CFG</a> are inlined).  <a href="classotawa_1_1ContextualProcessor.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1AbstractFeature.html">otawa::AbstractFeature</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">See <a class="el" href="classotawa_1_1Feature.html">Feature</a>.  <a href="classotawa_1_1AbstractFeature.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1Feature.html">otawa::Feature&lt; T, C &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A feature is a set of facilities, usually provided using properties, available on a framework.  <a href="classotawa_1_1Feature.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1SilentFeature.html">otawa::SilentFeature</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The usual <a class="el" href="classotawa_1_1Feature.html">Feature</a> class has as drawback to exhibit completely the processing of the feature and therefore, in C++, to require too much header file inclusion (like the default processor or the default handler structure).  <a href="classotawa_1_1SilentFeature.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1FunProcessor.html">otawa::FunProcessor</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a specialization of the processor class dedicated to function processing.  <a href="classotawa_1_1FunProcessor.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1LBlockProcessor.html">otawa::LBlockProcessor</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a specialization of the processor class dedicated to <a class="el" href="classotawa_1_1LBlock.html" title="The l-block is an abstraction allowing to split the basic block according to the bound of the cache b...">LBlock</a>.  <a href="classotawa_1_1LBlockProcessor.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1Processor.html">otawa::Processor</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The processor class is implemented by all code processor.  <a href="classotawa_1_1Processor.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1NoProcessor.html">otawa::NoProcessor</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A processor whise execution cause an exception throw.  <a href="classotawa_1_1NoProcessor.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1UnavailableFeatureException.html">otawa::UnavailableFeatureException</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This exception is thrown when an feature can not be computed.  <a href="classotawa_1_1UnavailableFeatureException.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1Progress.html">otawa::Progress</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class is an interface to get progress information about execution of a processor.  <a href="classotawa_1_1Progress.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1ProcessorException.html">otawa::ProcessorException</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class is used for returning exceptions from the processors.  <a href="classotawa_1_1ProcessorException.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1Registry.html">otawa::Registry</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class dedicated to the registering of the processors.  <a href="classotawa_1_1Registry.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1AbstractRegistration.html">otawa::AbstractRegistration</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Abstract class to represent the registered processors.  <a href="classotawa_1_1AbstractRegistration.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1p_1_1declare.html">otawa::p::declare</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class to declare simple a processor.  <a href="classotawa_1_1p_1_1declare.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The OTAWA <a class="el" href="group__prop.html">Properties System</a> provides a flexible and easy way to store in the program representation the result of different analyses. </p>
<p>Yet, the computation of the WCET may require a lot of different analyses, it becomes wuicly difficult to handle the chaining of different analyses according their requirement. </p>


<h3><a class="anchor" id="proc_concepts"></a>Processor Concepts</h3><div class="textblock"><dl class="section user"><dt>Features</dt><dd></dd></dl>
<p>A feature represents a set of services that are available on the program representation. These services are provided either by the program loader, or by a previous analysis. These services are composed of: </p><ul>
<li>properties linked to the program representation, </li>
<li>methods providing meaninful results in the objefct of the program representation.</li>
</ul>
<p>The feature are an easier way to inform the framework that some services are provided and to group properties and methods in logical sets. A feature is mainly implemented by an <a class="el" href="classotawa_1_1AbstractFeature.html">otawa::AbstractFeature</a>.It may be implemented by a simple <a class="el" href="classotawa_1_1Feature.html">otawa::Feature</a> with a default code processor (see below) to satisfy the service if it is not provided. As the goal of feature is to share some data between analyses, it is first declared in a header file, for example "my_feature.h" : </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Feature_8h.html">otawa/proc/Feature.h</a>&gt;</span></div><div class="line"><span class="preprocessor">#include &quot;MyDefaultProcessor.h&quot;</span></div><div class="line"></div><div class="line"><span class="keyword">extern</span> Feature&lt;MyDefaultProcessor&gt; MY_FEATURE;</div></div><!-- fragment -->Then, it must defined in a source file, for example, "my_feature.cpp": </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;my_feature.h&quot;</span></div><div class="line"></div><div class="line">Feature&lt;MyDefaultProcessor&gt; MY_FEATURE(<span class="stringliteral">&quot;MY_FEATURE&quot;</span>);</div></div><!-- fragment -->Note that a feature must have a unique name: duplicate names in features names will be detected at system startup and will cause abortion of the application. Although it is not mandatory, it is advised (1) to give a name in uppercase with underscores to separe names and (2) to give the full-qualified C++ name. This last property will help to retrieve features when dynamic module loading is used.The way proposed above to declare a feature has a drawback: it is costly in computation time as it requires the user to include the default processor class. To avoid this, OTAWA propose to use the <a class="el" href="classotawa_1_1SilentFeature.html">otawa::SilentFeature</a> class. In this cas, the header file will become: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="SilentFeature_8h.html">otawa/proc/SilentFeature.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">extern</span> <a class="code" href="namespaceSilentFeature.html">SilentFeature</a> MY_FEATURE;</div></div><!-- fragment -->The, the source file is a bit more complex as it must now design the default processor: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;my_feature.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;MyDefaultProcessor&quot;</span></div><div class="line"></div><div class="line"><span class="keyword">static</span> SilentFeature::Maker&lt;MyDefaultProcessor&gt; MY_MAKER;</div><div class="line"><a class="code" href="namespaceSilentFeature.html">SilentFeature</a> MY_FEATURE(<span class="stringliteral">&quot;MY_FEATURE&quot;</span>, MY_MAKER);</div></div><!-- fragment --><dl class="section user"><dt>Code Processors</dt><dd></dd></dl>
<p>A code processor performs an analysis, that is, scan the program representation, extracts some properties and provide them to the remaining analyses. To organize the properties, they are grouped logically in features. To organize this work, the code processors records themselves to OTAWA in order to: </p><ul>
<li>ensures that the required features are available, </li>
<li>inform that the processor computes some new features.</li>
</ul>
<p>Consequently, in OTAWA, analyses are packaged inside code processors (<a class="el" href="classotawa_1_1Processor.html">otawa::Processor</a>) that manages the features but also provides other facilities: </p><ul>
<li>configuration of the processor work, </li>
<li>control of output streams, </li>
<li>statistics gathering, </li>
<li>details about the computation </li>
<li>several classes to make analysis writing easier (CFG processor, BB processor, contextual processor and so on), </li>
<li>resource cleanup.</li>
</ul>
<p>This class provides also a common way to invoke analyses. The configuration is perform in a property list structure: </p><div class="fragment"><div class="line">PropList props;</div><div class="line">CONFIGURATION_1(props) = value1;</div><div class="line">CONFIGURATION_2(props) = value2;</div><div class="line">...</div></div><!-- fragment -->Then, the processor object is simply created and invoked on a workspace: </p><div class="fragment"><div class="line">MyProcessor <a class="code" href="oipet_8cpp.html#a4fa9b3cd019c598bebf5eec00f9dda1c">proc</a>;</div><div class="line">proc.process(workspace, props);</div></div><!-- fragment -->For example, to redirect the log output of the processor and to activate verbosity, and to compute the domination in a CFG, we may do: </p><div class="fragment"><div class="line">PropList props;</div><div class="line"><a class="code" href="namespaceotawa.html#aa5b443176fc2102eac788f2724c80536">Processor::VERBOSE</a>(props) = <span class="keyword">true</span>;</div><div class="line"><a class="code" href="exegraph__LiExeGraphBBTime_8cpp.html#ac810fe5d02f4a3f224797dfa81a526cb">Processor::LOG</a>(props) = System::newFile(<span class="stringliteral">&quot;my_log.txt&quot;</span>);</div><div class="line">Domination dom;</div><div class="line">dom.process(workspace, props);</div></div><!-- fragment -->Notice that the configuration properties are passed to all processor invoked to provided features required by the invoked processor.<dl class="section user"><dt>Processor Registration</dt><dd></dd></dl>
<p>Code processors or analyzers can be invoked explicitly from C++ code, implicitly by requiring a feature or from a script (see Script class or <code>owcet</code> command). In the latter case, the processor name is used to retrieve its code and to allow to create an instance.As C++ does not provide any reflexive information to find back the constructor of a class, the code processor need to record in the main registry of OTAWA. To achieve, it must declare a static object (1) that will record itself to the main registry and (2) that provides all details of the code processor to the OTAWA framework: </p><ul>
<li>the name </li>
<li>the version </li>
<li>required and/or used features, </li>
<li>invalidated features, </li>
<li>provided features, </li>
<li>configuration properties, </li>
<li>the constructor, </li>
<li>possibly its base processor (as a default, all processor have for base <a class="el" href="classotawa_1_1Processor.html" title="The processor class is implemented by all code processor. ">otawa::Processor</a>).</li>
</ul>
<p>Although this registration can be achieved in different ways, the current preferred way requires to declare, as public members, a static attribute named <code>reg</code> and a constructor taking an AbstractRegistration with <code>reg</code> as default value. The constructor definition allows to pass the actual registration of the subclass (that is including the one of the current class) to the OTAWA framework. </p><div class="fragment"><div class="line"><span class="keyword">class </span>MyProcessor: <span class="keyword">public</span> BBProcessor {</div><div class="line"><span class="keyword">public</span>:</div><div class="line">                <span class="keyword">static</span> p::declare reg;</div><div class="line">                MyProcessor(AbstractRegistration&amp; r = reg): BBProcessor(r) { ... }</div><div class="line">};</div></div><!-- fragment -->In turn, the <code>static</code> attribute must be declared with the details of the code processor in the source file: </p><div class="fragment"><div class="line">p::declare MyProcessor::reg =</div><div class="line">        p::init(<span class="stringliteral">&quot;MyProcessor&quot;</span>, Version(1, 0, 0))</div><div class="line">        .base(BBProcessor::reg),</div><div class="line">        .require(CFG_COLLECTED_FEATURE)</div><div class="line">        .provide(MY_FEATURE)</div><div class="line">        .make&lt;MyProcessor&gt;();</div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
