<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Otawa: Application Writing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Otawa
   &#160;<span id="projectnumber">0.10</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__application.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a>  </div>
  <div class="headertitle">
<div class="title">Application Writing</div>  </div>
</div><!--header-->
<div class="contents">

<p>OTAWA may be used from an graphical user interface like Eclipse or from the command line.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1LogOption.html">otawa::LogOption</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines a command line option supporting log level thanks to strings 'proc', 'cfg' or 'bb'.  <a href="classotawa_1_1LogOption.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classotawa_1_1Application.html">otawa::Application</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A class making easier the use of applications built on OTAWA.  <a href="classotawa_1_1Application.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>OTAWA may be used from an graphical user interface like Eclipse or from the command line. </p>
<p>In the latter case, you can either use the existing commands (<a class="el" href="group__commands.html#dumpcfg">dumpcfg Command</a>, <a class="el" href="group__commands.html#owcet">owcet Command</a>, etc) but you can also write your own commands adapted to a specific process not already provided by OTAWA.</p>
<p>Although the usual way to write a command with a <code>main</code> function works, you can save a tedious task of handling parameters, opening the executable, processing error by using the otawa::app::Application class.</p>
<p>Just define your own class inheriting and specializing app::Application like below and you do neither need to declare the <code>main</code> function yourself thanks to the <code>OTAWA_RUN</code> macro.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Application_8h.html">otawa/app/Application.h</a>&gt;</span></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceotawa.html">otawa</a>;</div><div class="line"></div><div class="line"><span class="keyword">class </span>MyCommand: <span class="keyword">public</span> <a class="code" href="classotawa_1_1Application.html">Application</a> {</div><div class="line"><span class="keyword">public</span>:</div><div class="line">        MyCommand(<span class="keywordtype">void</span>): <a class="code" href="classotawa_1_1Application.html">Application</a>(<span class="stringliteral">&quot;my-command&quot;</span>, Version(1, 0, 2)) { }</div><div class="line"><span class="keyword">protected</span>:</div><div class="line">     <span class="keywordtype">void</span> work(<a class="code" href="classotawa_1_1PropList.html">PropList</a> &amp;props) <span class="keywordflow">throw</span>(elm::Exception) {</div><div class="line">        <span class="comment">// do_something useful on the opened workspace</span></div><div class="line">     }</div><div class="line">};</div><div class="line"><a class="code" href="Application_8h.html#a4ffd84b56ff78b62aa633e0148fd5aa2">OTAWA_RUN</a>(MyApp)</div></div><!-- fragment --><p>Basically, the produced command takes as first argument the executable and as other free arguments the function to process. The functions to process are described either by their name, or by their address (integer address or 0x-prefixed hexadecimal address). If no other free argument is provided, the command is applied on the <code>main</code> function of the executable. For each function name, a call to <code>work()</code> method is performed, the passed property list is initialized accordingly and a workspace ready to use is created. To get it, just call the <a class="el" href="classotawa_1_1Application.html#a2d7b0b37dcf24a469fc7247eb91db4d4">Application::workspace()</a> method. You can now perform any required analysis.</p>
<p>In addition, the app::Application class provides standards options like: </p><ul>
<li>&ndash;add-prop ID=VALUE &ndash; set a configuration property (passed to manager and other processors), </li>
<li>-f|&ndash;flowfacts PATH &ndash; select a flow fact file to load </li>
<li>-h|&ndash;help &ndash; option help display, </li>
<li>&ndash;load-param ID=VALUE &ndash; add a load parameter (passed to the manager load command) </li>
<li>&ndash;log one of proc, deps, cfg, bb or inst &ndash; select level of log </li>
<li>-v|&ndash;verbose &ndash; verbose mode activation.</li>
</ul>
<p>In addition, you can also defines your own options using the elm::option classes: </p><div class="fragment"><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceelm.html">elm</a>;</div><div class="line"><span class="keyword">class </span>MyCommand: <span class="keyword">public</span> app::Application {</div><div class="line"><span class="keyword">public</span>:</div><div class="line">        MyCommand(<span class="keywordtype">void</span>): app::<a class="code" href="classotawa_1_1Application.html">Application</a>(<span class="stringliteral">&quot;my-command&quot;</span>, Version(1, 0, 2)),</div><div class="line">                option1(*this),</div><div class="line">                option2(*this), ... { }</div><div class="line"><span class="keyword">private</span>:</div><div class="line">     option::SwitchOption option1;</div><div class="line">     option::ValueOption&lt;int&gt; option2;</div><div class="line">     ...</div><div class="line">};</div></div><!-- fragment --><p>Finally, just compile your OTAWA application and it is ready to run and to process an executable. </p>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
