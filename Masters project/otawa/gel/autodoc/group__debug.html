<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>GEL: Generic Debugging Information</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GEL
   &#160;<span id="projectnumber">0.99</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__debug.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Generic Debugging Information</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga5fdbf59d7d8a41ea5f7296c971863cf5"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structgel__location__t.html">gel_location_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__debug.html#ga5fdbf59d7d8a41ea5f7296c971863cf5">gel_location_t</a></td></tr>
<tr class="separator:ga5fdbf59d7d8a41ea5f7296c971863cf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga700c557f002a0fc16c4bda042d8d47de"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__debug.html#ga700c557f002a0fc16c4bda042d8d47de">gel_delete_line_map</a> (<a class="el" href="structgel__line__map__t.html">gel_line_map_t</a> *map)</td></tr>
<tr class="separator:ga700c557f002a0fc16c4bda042d8d47de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3a78262882b40dd7ee82f84835544ae0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structgel__location__t.html">gel_location_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__debug.html#ga3a78262882b40dd7ee82f84835544ae0">gel_first_line</a> (<a class="el" href="structgel__line__iter__t.html">gel_line_iter_t</a> *iter, <a class="el" href="structgel__line__map__t.html">gel_line_map_t</a> *map)</td></tr>
<tr class="separator:ga3a78262882b40dd7ee82f84835544ae0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga71b64aa7acde361d57f8445f429b7cfe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structgel__location__t.html">gel_location_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__debug.html#ga71b64aa7acde361d57f8445f429b7cfe">gel_next_line</a> (<a class="el" href="structgel__line__iter__t.html">gel_line_iter_t</a> *iter)</td></tr>
<tr class="separator:ga71b64aa7acde361d57f8445f429b7cfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga87e46560b33aefbac60ec96d16314149"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structgel__location__t.html">gel_location_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__debug.html#ga87e46560b33aefbac60ec96d16314149">gel_first_addr</a> (<a class="el" href="structgel__addr__iter__t.html">gel_addr_iter_t</a> *iter, <a class="el" href="structgel__line__map__t.html">gel_line_map_t</a> *map)</td></tr>
<tr class="separator:ga87e46560b33aefbac60ec96d16314149"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa5e809b4d6f9b5e2d667fc0e1a3d56e7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structgel__location__t.html">gel_location_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__debug.html#gaa5e809b4d6f9b5e2d667fc0e1a3d56e7">gel_next_addr</a> (<a class="el" href="structgel__addr__iter__t.html">gel_addr_iter_t</a> *iter)</td></tr>
<tr class="separator:gaa5e809b4d6f9b5e2d667fc0e1a3d56e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5bd94084d62a232cf6704405696d699e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a53428b953a0ae6fba02a5b3596c867e0">vaddr_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__debug.html#ga5bd94084d62a232cf6704405696d699e">gel_address_from_line</a> (<a class="el" href="structgel__line__map__t.html">gel_line_map_t</a> *map, const char *file, int line)</td></tr>
<tr class="separator:ga5bd94084d62a232cf6704405696d699e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga393c1d41e14660e84489b44e6c540197"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__debug.html#ga393c1d41e14660e84489b44e6c540197">gel_line_from_address</a> (<a class="el" href="structgel__line__map__t.html">gel_line_map_t</a> *map, <a class="el" href="types_8h.html#a53428b953a0ae6fba02a5b3596c867e0">vaddr_t</a> addr, const char **file, int *line)</td></tr>
<tr class="separator:ga393c1d41e14660e84489b44e6c540197"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad411862452a7b99d66e2bf7dee5fa219"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structgel__line__map__t.html">gel_line_map_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__debug.html#gad411862452a7b99d66e2bf7dee5fa219">gel_new_line_map</a> (<a class="el" href="group__file.html#ga0b171e7966bcd96fcf061a1973cf06b7">gel_file_t</a> *file)</td></tr>
<tr class="separator:gad411862452a7b99d66e2bf7dee5fa219"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="debug__line_8h.html">gel/debug_line.h</a>&gt;</span></div></div><!-- fragment --><p>This module provide access to the debugging information of an executable. It replaces and complement the old DWARF module allowing transparent access to any supported debugging format. For now, it only provides DWARF access but will soon support STABS debugging information.</p>
<p>To use debugging line information one has first to build a linemap once the executable has been opened: </p><div class="fragment"><div class="line">  <a class="code" href="structgel__line__map__t.html">gel_line_map_t</a> *map = <a class="code" href="group__debug.html#gad411862452a7b99d66e2bf7dee5fa219">gel_new_line_map</a>(file);</div><div class="line">  <span class="keywordflow">if</span>(map == NULL)</div><div class="line">                <span class="comment">/* handle error here * /</span></div><div class="line"><span class="comment">* </span></div></div><!-- fragment --><p>This function will automatically look for the available debugging information and invoke the matching manager. If no debugging information is found or for any error, it returns NULL (and error in <a class="el" href="group__error.html#gab3c2a1ad407284b3e057e1ab5fb6c735">gel_errno</a>).</p>
<p>Then, you can retrieve the address matching a source / line pair with: </p><div class="fragment"><div class="line"><a class="code" href="types_8h.html#a53428b953a0ae6fba02a5b3596c867e0">vaddr_t</a>       address = <a class="code" href="group__debug.html#ga5bd94084d62a232cf6704405696d699e">gel_address_from_line</a>(map, <span class="stringliteral">&quot;my_source.c&quot;</span>, 666);</div></div><!-- fragment --><p>Or do the inverse, getting source and line from an address (if any). </p><div class="fragment"><div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> *source;</div><div class="line">  <span class="keywordtype">int</span> line;</div><div class="line">  <span class="keywordflow">if</span>(<a class="code" href="group__debug.html#ga393c1d41e14660e84489b44e6c540197">gel_line_from_address</a>(map, address, &amp;source, &amp;line) &lt; 0)</div><div class="line">                <span class="comment">/* there is an error ! * /</span></div><div class="line"><span class="comment">* </span></div></div><!-- fragment --><p>You can also traverse the list of sorted by source / line information: </p><div class="fragment"><div class="line"><a class="code" href="dwarf__line_8h.html#ad95a70b70799ad44c1547122ea5dcfb2">dwarf_line_iter_t</a> iter;</div><div class="line"><a class="code" href="dwarf__line_8h.html#ae43ff09e59cc3b2b3c8db99807c2edb9">dwarf_location_t</a> loc;</div><div class="line"><span class="keywordflow">for</span>(loc = <a class="code" href="group__dwarf.html#gaf67c4df3845ef2676e5ce29b19821503">dwarf_first_line</a>(&amp;iter, map); loc.file; loc = <a class="code" href="group__dwarf.html#ga9bce89298f61b6d5666c7c68c9179e8b">dwarf_next_line</a>(&amp;iter))</div><div class="line">              printf(<span class="stringliteral">&quot;low address=%08x, high address=%08x, line=%8d, file=%s\n&quot;</span>,</div><div class="line">                      loc.low_addr, loc.high_addr, loc.line, loc.file);</div></div><!-- fragment --><p> Notice that, in this case, if the debugging information contains aliases (same file name for different instructions blocks), ony one will be visible.</p>
<p>Or the list of available sorted by memory addresses: </p><div class="fragment"><div class="line"><a class="code" href="dwarf__line_8h.html#a8bd5b5450a3767e4e3d8394bbfe704b7">dwarf_addr_iter_t</a> iter;</div><div class="line"><a class="code" href="dwarf__line_8h.html#ae43ff09e59cc3b2b3c8db99807c2edb9">dwarf_location_t</a> loc;</div><div class="line"><span class="keywordflow">for</span>(loc = <a class="code" href="group__dwarf.html#gac08b5d2814d9227a0888cb34b4a13f16">dwarf_first_addr</a>(&amp;iter, map); loc.file; loc = <a class="code" href="group__dwarf.html#ga1b71691b374b6bc47625c0436c26a9dd">dwarf_next_addr</a>(&amp;iter))</div><div class="line">              printf(<span class="stringliteral">&quot;low address=%08x, high address=%08x, line=%8d, file=%s\n&quot;</span>,</div><div class="line">                      loc.low_addr, loc.high_addr, loc.line, loc.file);</div></div><!-- fragment --><p>Finally, the linemap may be fried with: </p><div class="fragment"><div class="line"><a class="code" href="group__debug.html#ga700c557f002a0fc16c4bda042d8d47de">gel_delete_line_map</a>(map);</div></div><!-- fragment --> <h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ga5fdbf59d7d8a41ea5f7296c971863cf5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgel__location__t.html">gel_location_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This structure is used to return a debugging line information made of a source file, a line, a starting and an ending address. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga5bd94084d62a232cf6704405696d699e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a53428b953a0ae6fba02a5b3596c867e0">vaddr_t</a> gel_address_from_line </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgel__line__map__t.html">gel_line_map_t</a> *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the actual address of a source line. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">map</td><td>Line map to use. </td></tr>
    <tr><td class="paramname">file</td><td>File name. </td></tr>
    <tr><td class="paramname">line</td><td>Line number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Matching address or null if no address is found. </dd></dl>

</div>
</div>
<a class="anchor" id="ga700c557f002a0fc16c4bda042d8d47de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gel_delete_line_map </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgel__line__map__t.html">gel_line_map_t</a> *&#160;</td>
          <td class="paramname"><em>map</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Delete a line map. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">map</td><td>Line map to delete. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga87e46560b33aefbac60ec96d16314149"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgel__location__t.html">gel_location_t</a> gel_first_addr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgel__addr__iter__t.html">gel_addr_iter_t</a> *&#160;</td>
          <td class="paramname"><em>iter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structgel__line__map__t.html">gel_line_map_t</a> *&#160;</td>
          <td class="paramname"><em>map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize the given iterator on the first address. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iter</td><td>Iterator to initialize. </td></tr>
    <tr><td class="paramname">map</td><td>Line map to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return the first location or an empty file location if there is no address. </dd></dl>

</div>
</div>
<a class="anchor" id="ga3a78262882b40dd7ee82f84835544ae0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgel__location__t.html">gel_location_t</a> gel_first_line </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgel__line__iter__t.html">gel_line_iter_t</a> *&#160;</td>
          <td class="paramname"><em>iter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structgel__line__map__t.html">gel_line_map_t</a> *&#160;</td>
          <td class="paramname"><em>map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize the iterator on the lines. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iter</td><td>Iterator to use. </td></tr>
    <tr><td class="paramname">map</td><td>Map to iterate on. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>First location or an empty file location if there is no line. </dd></dl>

</div>
</div>
<a class="anchor" id="ga393c1d41e14660e84489b44e6c540197"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gel_line_from_address </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgel__line__map__t.html">gel_line_map_t</a> *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a53428b953a0ae6fba02a5b3596c867e0">vaddr_t</a>&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>line</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the file and line matching an actual binary address. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">map</td><td>Used map. </td></tr>
    <tr><td class="paramname">addr</td><td>Looked address. </td></tr>
    <tr><td class="paramname">file</td><td>Returned file. </td></tr>
    <tr><td class="paramname">line</td><td>Returned line. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success, -1 if not found. </dd></dl>

</div>
</div>
<a class="anchor" id="gad411862452a7b99d66e2bf7dee5fa219"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgel__line__map__t.html">gel_line_map_t</a>* gel_new_line_map </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__file.html#ga0b171e7966bcd96fcf061a1973cf06b7">gel_file_t</a> *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Open the debug source line information. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>File to work on. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Created line map for file or NULL (error in gel_errno). </dd></dl>

</div>
</div>
<a class="anchor" id="gaa5e809b4d6f9b5e2d667fc0e1a3d56e7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgel__location__t.html">gel_location_t</a> gel_next_addr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgel__addr__iter__t.html">gel_addr_iter_t</a> *&#160;</td>
          <td class="paramname"><em>iter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the next location. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iter</td><td>Current address iterator. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Next address or empty file location. </dd></dl>

</div>
</div>
<a class="anchor" id="ga71b64aa7acde361d57f8445f429b7cfe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgel__location__t.html">gel_location_t</a> gel_next_line </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgel__line__iter__t.html">gel_line_iter_t</a> *&#160;</td>
          <td class="paramname"><em>iter</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Go to the next line. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iter</td><td>Used iterator. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Next location or an empty file location if there is no more line. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
